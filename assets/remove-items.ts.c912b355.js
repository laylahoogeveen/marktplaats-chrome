import{g as m}from"./chrome-dev.c41397dc.js";chrome.runtime.onMessage.addListener(function(e,s,t){!e.message||e.message=="update_url"&&t({message:"update_url_permission"})});function p(){var i;const e=(i=document.getElementById("content"))!=null?i:document.body,s={subtree:!0,childList:!0},t=new MutationObserver(function(n,r){r.takeRecords(),r.disconnect(),y(),r.observe(e,s)});t.observe(e,s),!!location.href&&!location.href.includes("marktplaats")&&t.disconnect()}const h=m();p();async function y(){let e=!0;const s=u("hz-Button--small isActive");setTimeout(()=>{t()},0),setTimeout(()=>{t()},300);function t(){s&&s.forEach(n=>{const r=c("view-option-label",n);if(r){const o=r.innerHTML.replace(" ","");o.includes("Lijst")?e=!0:o.includes("Foto")||document.URL.includes("#view:gallery-view")?e=!1:document.URL.includes("#view:list-view")&&(e=!0)}})}setTimeout(async()=>{await i()},0);async function i(){if(e){const n=u("hz-Listing hz-Listing--list-item");n&&await d(n,!0)}else{const n=u("hz-Listing hz-Listing--gallery-item");n&&await d(n,!1)}}}async function d(e,s){const t=await h;if(e){let n=e.length;const r=[];e.forEach(o=>{i(o)&&r.push(o)}),r.forEach(o=>{var l;const a=o.nextElementSibling;o.style.display="none",(l=a==null?void 0:a.classList)!=null&&l.contains("hz-Listing--other-seller")&&a.remove(),n--}),n==e.length||n<1&&await L(s)}v();function i(n){const r=c("hz-Listing-priority",n);function o(){if(!!r){if(s){if(!(!t.showDagtopper&&r.querySelector("span").innerHTML=="Dagtopper"||!t.showSponsored&&r.querySelector("span").innerHTML.trim()=="Topadvertentie")&&!c("hz-Listing-seller-external-link",n))return!1}else if(!s&&!(!t.showDagtopper&&r.querySelector("span").innerHTML=="Dagtopper"||!t.showSponsored&&r.querySelector("span").innerHTML.trim()=="Topadvertentie")&&!c("hz-Listing-Opvalsticker-wrapper",n)){const f=c("hz-Listing-seller-link",n);return f?!!f.querySelector("a"):void 0}return!0}}return o()}}function c(e,s){var t,i;return s?(t=s.getElementsByClassName(e)[0])!=null?t:!1:(i=document.getElementsByClassName(e)[0])!=null?i:!1}function w(e){var s;return(s=document.getElementById(e))!=null?s:!1}function u(e){var s;return(s=Array.from(document.getElementsByClassName(e)))!=null?s:!1}function v(){["hz-Listings__container--cas","hz-Listing hz-Listing--other-seller","hz-Listings__admarktTitle","ad ad-1","ad","hz-Banner","hz-Listings__container--casGallery"].forEach(t=>{const i=u(t);i&&i.forEach(n=>{n.style.display="none"})}),["adsense-container","ads","ftContainer","ad_unit"].forEach(t=>{const i=w(t);i&&(i.style.display="none")})}async function L(e){const s=/p\/([0-9]){1,5}/;let t=document.URL;if(!t)return;const i=t.match(s),n=(i==null?void 0:i.length)>0?i[i.length-1]:null;if(n){const o=(parseInt(n)+1).toString(),a=n.replace(/([0-9]){1,5}/,o),l=t.replace(n,a);await g(l)}else{t[t.length-1]=="/"&&(t=t.slice(0,-1));const r=`${t}/p/2/${e?"#view:list-view":"#view:gallery-view"}`;await g(r)}}async function g(e){await chrome.runtime.sendMessage({message:"update_url",newUrl:e})}
