import{g as p}from"./chrome-dev-FtPME9q3.js";chrome.runtime.onMessage.addListener(function(e,s,n){e.message&&e.message=="update_url"&&n({message:"update_url_permission"})});function h(){const e=document.getElementById("content")??document.body,s={subtree:!0,childList:!0},n=new MutationObserver(function(i,t){t.takeRecords(),t.disconnect(),w(),t.observe(e,s)});n.observe(e,s),location.href&&!location.href.includes("marktplaats")&&n.disconnect()}const y=p();h();async function w(){let e=!0;const s=f("hz-Button--small isActive");setTimeout(()=>{n()},0),setTimeout(()=>{n()},300);function n(){s&&s.forEach(t=>{const o=c("view-option-label",t);if(o){const a=o.innerHTML.replace(" ","");a.includes("Lijst")?e=!0:a.includes("Foto")||document.URL.includes("#view:gallery-view")?e=!1:document.URL.includes("#view:list-view")&&(e=!0)}})}setTimeout(async()=>{await i()},0);async function i(){if(e){const t=f("hz-Listing hz-Listing--list-item");t&&await d(t,!0)}else{const t=f("hz-Listing hz-Listing--gallery-item");t&&await d(t,!1)}}}async function d(e,s){const n=await y;if(e){let t=e.length;const o=[];e.forEach(a=>{i(a)&&o.push(a)}),o.forEach(a=>{var l;const r=a.nextElementSibling;a.style.display="none",(l=r==null?void 0:r.classList)!=null&&l.contains("hz-Listing--other-seller")&&r.remove(),t--}),t==e.length||t<1&&await T(s)}L();function i(t){const o=c("hz-Listing-priority",t);function a(){if(o){if(s){const r=o.querySelector("span");if(!r)return;if(!(!n.showDagtopper&&r.innerHTML=="Dagtopper"||!n.showSponsored&&r.innerHTML.trim()=="Topadvertentie")&&!c("hz-Listing-seller-external-link",t))return!1}else if(!s){const r=o.querySelector("span");if(!r)return;if(!(!n.showDagtopper&&r.innerHTML=="Dagtopper"||!n.showSponsored&&r.innerHTML.trim()=="Topadvertentie")&&!c("hz-Listing-Opvalsticker-wrapper",t)){const u=c("hz-Listing-seller-link",t);return u?!!u.querySelector("a"):void 0}}return!0}}return a()}}function c(e,s){return s?s.getElementsByClassName(e)[0]??!1:document.getElementsByClassName(e)[0]??!1}function v(e){return document.getElementById(e)??!1}function f(e){return Array.from(document.getElementsByClassName(e))??!1}function L(){["hz-Listings__container--cas","hz-Listing hz-Listing--other-seller","hz-Listings__admarktTitle","ad ad-1","ad","hz-Banner","bannerContainerLoading","hz-Listings__container--casGallery"].forEach(n=>{const i=f(n);i&&i.forEach(t=>{t.style.display="none"})}),["adsense-container","ads","ftContainer","ad_unit"].forEach(n=>{const i=v(n);i&&(i.style.display="none")})}async function T(e){const s=/p\/([0-9]){1,5}/;let n=document.URL;if(!n)return;const i=n.match(s),t=(i==null?void 0:i.length)>0?i[i.length-1]:null;if(t){const a=(parseInt(t)+1).toString(),r=t.replace(/([0-9]){1,5}/,a),l=n.replace(t,r);await g(l)}else{n[n.length-1]=="/"&&(n=n.slice(0,-1));const o=`${n}/p/2/${e?"#view:list-view":"#view:gallery-view"}`;await g(o)}}async function g(e){await chrome.runtime.sendMessage({message:"update_url",newUrl:e})}export{w as removeAds};
